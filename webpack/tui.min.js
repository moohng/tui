!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.tui=e():t.tui=e()}(self,(function(){return function(){"use strict";var t={d:function(e,i){for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function n(t){var e=[];return t.forEach((function(t){Array.isArray(t)?e.push.apply(e,function(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n(t))):e.push(t)})),e}function o(){return document.createDocumentFragment()}t.r(e),t.d(e,{Dialog:function(){return g},Preview:function(){return T},Swiper:function(){return P},Toast:function(){return m}});var r="Fragment",s=Object.prototype.hasOwnProperty,a=Object.prototype.toString;function c(t){if("string"==typeof t)return t.split(/\s+|\s*,\s*/).filter((function(t){return t}));if(Array.isArray(t)){var e=[];return t.forEach((function(t){e.push.apply(e,c(t))})),e}return"[object Object]"===a.call(t)?c(Object.keys(t).filter((function(e){return t[e]}))):[]}function l(t,e){"string"==typeof t&&(t=t===r?o():document.createElement(t)),e&&Object.keys(e).forEach((function(i){var n,o=null===(n=i.match(/^on(\w+)$/))||void 0===n?void 0:n[1];if(o&&"function"==typeof e[i])t.addEventListener(o.toLocaleLowerCase(),e[i],!1);else if("style"===i&&"string"!=typeof e[i]){var r=e[i];for(var a in r)s.call(r,a)&&(t.style[a]=r[a])}else if("className"===i){var l=c(e[i]);t.classList.add.apply(t.classList,l)}else{var u=i.replace(/[A-Z0-9]/g,(function(t){return"-"+t.toLocaleLowerCase()}));t.setAttribute&&t.setAttribute(u,e[i]||"")}}));for(var i=arguments.length,a=new Array(i>2?i-2:0),l=2;l<i;l++)a[l-2]=arguments[l];var u=n(a.filter((function(t){return t||"number"==typeof t})));return t.append.apply(t,u),t}var u=Object.prototype.hasOwnProperty;function h(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var n in e)u.call(e,n)&&(t.style[n]=i?"":e[n])}function d(t,e){var i,n;(e.from||e.to)&&(e=Object.assign({duration:300,delay:0,easing:"ease"},e),t instanceof DocumentFragment?t=[].slice.call(t.children):t instanceof HTMLElement&&(t=[t]),Array.isArray(t)||(t=[]),t.forEach((function(t){t.style.transition="all ".concat(e.duration,"ms ").concat(e.easing),h(t,e.from)})),null===(i=(n=e).before)||void 0===i||i.call(n,t),setTimeout((function(){t.forEach((function(t){h(t,e.from,!0),h(t,e.to)})),setTimeout((function(){var i,n;t.forEach((function(t){t.style.transition=""})),null===(i=(n=e).complete)||void 0===i||i.call(n,t)}),e.duration)}),e.delay))}function f(t,e){return e instanceof HTMLElement&&(e={parent:e}),new Promise((function(i){d(t,Object.assign({},e,{from:{opacity:"0"},before:function(t){var i,n,o;(null===(i=e)||void 0===i?void 0:i.parent)&&HTMLElement.prototype.append.apply(e.parent,t),null===(n=e)||void 0===n||null===(o=n.mounted)||void 0===o||o.call(n)},complete:function(){var t,n;null===(t=e)||void 0===t||null===(n=t.complete)||void 0===n||n.call(t),i()}}))}))}function p(t,e){return"boolean"==typeof e&&(e={remove:e}),new Promise((function(i){d(t,Object.assign({},e,{to:{opacity:"0"},complete:function(t){var n,o,r;(null===(n=e)||void 0===n?void 0:n.remove)&&t.forEach((function(t){return t.remove()})),null===(o=e)||void 0===o||null===(r=o.complete)||void 0===r||r.call(o),i()}}))}))}var v=function(t){var e,i,n;"string"==typeof t&&(t={text:t}),t.type=null!==(e=t.type)&&void 0!==e?e:"toast","toast"===t.type?t.position=t.position||"bottom":"loading"===t.type?t.position="center":t.position="top";var o="loading"===t.type?l(r,null,l("div",{className:"mask loading"}),l("div",{className:"tui-toast",dataType:t.type,dataPosition:t.position},l("i",{className:"tui-icon__loading"}),l("span",null,null!==(i=t.text)&&void 0!==i?i:""))):l("div",{className:"tui-toast",dataType:t.type,dataPosition:t.position},null!==(n=t.text)&&void 0!==n?n:"");o instanceof DocumentFragment&&(o=[].slice.call(o.children)),f(o,document.body);var s,a=function(){p(o,!0)};return"loading"!==t.type&&setTimeout(a,null!==(s=t.duration)&&void 0!==s?s:2e3),a};v.info=function(t){return v({text:t,type:"info"})},v.success=function(t){return v({text:t,type:"success"})},v.error=function(t){return v({text:t,type:"error"})},v.warn=function(t){return v({text:t,type:"warn"})},v.loading=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"正在加载";return v({text:t,type:"loading"})};var y,m=v,g=function(t){var e=t.title,i=t.content,n=t.buttons,o=t.closable,r=t.className;return new Promise((function(t){var s,a=l("div",{className:"tui-dialog"},l("div",{className:"mask cover",onClick:function(){o&&s()}}),l("div",{className:["tui-dialog__body",r]},e&&l("div",{className:"tui-dialog__hd"},e),i&&l("div",{className:"tui-dialog__content"},i),(null==n?void 0:n.length)&&l("div",{className:"tui-dialog__ft"},n.map((function(t,e){return l("a",{className:["btn",t.className],style:{color:t.color},onClick:function(){return function(t,e){var i;"string"!=typeof e&&Promise.resolve(null===(i=e.onClick)||void 0===i?void 0:i.call(e,t)).then((function(){return s(t)}))}(e,t)}},t.text||t)})))));!function(t,e){e instanceof HTMLElement&&(e={parent:e}),new Promise((function(i){d(t,Object.assign({},e,{from:{opacity:"0",transform:"scale(1.185)"},before:function(t){var i,n,o;(null===(i=e)||void 0===i?void 0:i.parent)&&HTMLElement.prototype.append.apply(e.parent,t),null===(n=e)||void 0===n||null===(o=n.mounted)||void 0===o||o.call(n)},complete:function(){var t,n;null===(t=e)||void 0===t||null===(n=t.complete)||void 0===n||n.call(t),i()}}))}))}(a,document.body),s=function(e){(function(t,e){return"boolean"==typeof e&&(e={remove:e}),new Promise((function(i){d(t,Object.assign({},e,{to:{opacity:"0",transform:"scale(1.185)"},complete:function(t){var n,o,r;(null===(n=e)||void 0===n?void 0:n.remove)&&t.forEach((function(t){return t.remove()})),null===(o=e)||void 0===o||null===(r=o.complete)||void 0===r||r.call(o),i()}}))}))})(a,!0).then((function(){t(e)}))}}))};function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function w(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}!function(t){t.last="last",t.next="next"}(y||(y={}));var P=function(){function t(e){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(this,t),w(this,"container",void 0),w(this,"wrapper",void 0),w(this,"offsetList",[]),w(this,"options",void 0),w(this,"directionKey","x"),w(this,"currentIndex",void 0),w(this,"length",0),w(this,"autoplay",!1),w(this,"autoplayDelay",3e3),w(this,"autoplayTimer",0),w(this,"eventCacheList",{}),w(this,"startPosition",{x:0,y:0}),w(this,"lastPosition",{x:0,y:0}),w(this,"currentPosition",{x:0,y:0}),w(this,"dir",void 0),w(this,"lastMovePosition",{x:0,y:0}),w(this,"swipeTimer",0),"string"==typeof e&&(e=document.querySelector(e)),this.container=e,this.wrapper=this.container.firstChild,this.options=Object.assign({direction:"horizontal",speed:300,effect:"slide",freeMode:!1,initialSlide:0,loop:!1},n,{freeMode:!1}),"vertical"===this.options.direction&&(this.directionKey="y"),this.currentIndex=this.options.initialSlide||0,this.init(),this.container.addEventListener("DOMSubtreeModified",(function(){i.init()}),!1)}var e,i;return e=t,(i=[{key:"init",value:function(){var t=this;if(this.options.freeMode)this.options.loop=!1,this.autoplay=!1,this.offsetList.push(0,this.wrapper.offsetWidth-this.container.offsetWidth);else{if(this.options.loop){var e,i,n=null===(e=this.wrapper.firstChild)||void 0===e?void 0:e.cloneNode(!0),o=null===(i=this.wrapper.lastChild)||void 0===i?void 0:i.cloneNode(!0);o&&this.wrapper.insertBefore(o,this.wrapper.firstChild),n&&this.wrapper.appendChild(n),this.currentIndex+=1}[].slice.call(this.wrapper.children).forEach((function(e){t.offsetList.push("vertical"===t.options.direction?e.offsetTop:e.offsetLeft)})),this.scrollTo(0),"boolean"==typeof this.options.autoplay?this.autoplay=this.options.autoplay:"number"==typeof this.options.autoplay&&(this.autoplay=!0,this.autoplayDelay=this.options.autoplay||this.autoplayDelay)}this.length=this.offsetList.length,console.log(this.offsetList),this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),this.wrapper.addEventListener("touchstart",this.handleTouchStart,!1),this.wrapper.addEventListener("touchmove",this.handleTouchMove,!1),this.wrapper.addEventListener("touchend",this.handleTouchEnd,!1),this.wrapper.addEventListener("touchcancel",this.handleTouchEnd,!1)}},{key:"handleTouchStart",value:function(t){this.startPosition={x:t.touches[0].pageX,y:t.touches[0].pageY},this.dir=void 0,clearTimeout(this.autoplayTimer)}},{key:"handleTouchMove",value:function(t){var e=this,i=t.touches[0],n=i.pageX,o=i.pageY;this.currentPosition={x:n-this.startPosition.x+this.lastPosition.x,y:o-this.startPosition.y+this.lastPosition.y},this.currentPosition[this.directionKey]>this.offsetList[0]?this.currentPosition[this.directionKey]=.3*this.currentPosition[this.directionKey]:this.currentPosition[this.directionKey]<-this.offsetList[this.length-1]&&(this.currentPosition[this.directionKey]=-this.offsetList[this.length-1]+.3*(this.currentPosition[this.directionKey]+this.offsetList[this.length-1])),this.wrapper.style.transform="translate".concat(this.directionKey.toLocaleUpperCase(),"(").concat(this.currentPosition[this.directionKey],"px) translateZ(0)"),this.wrapper.style.transition="",n<this.lastMovePosition.x||o<this.lastMovePosition.y?this.dir=y.next:(n>this.lastMovePosition.x||o>this.lastMovePosition.y)&&(this.dir=y.last),this.lastMovePosition={x:n,y:o},clearTimeout(this.swipeTimer),this.swipeTimer=window.setTimeout((function(){e.currentPosition.x<e.lastPosition.x||e.currentPosition.y<e.lastPosition.y?e.dir=y.next:(e.currentPosition.x>e.lastPosition.x||e.currentPosition.y>e.lastPosition.y)&&(e.dir=y.last)}),200)}},{key:"handleTouchEnd",value:function(){var t=this;if(this.dir)if(this.options.freeMode)this.currentPosition[this.directionKey]<-this.offsetList[1]?(this.currentIndex=1,this.scrollTo()):this.currentPosition[this.directionKey]>0?(this.currentIndex=0,this.scrollTo()):this.lastPosition=this.currentPosition;else{var e=this.offsetList.findIndex((function(e){return-t.currentPosition[t.directionKey]<e}));if(this.dir===y.next)if(e>=0){var i;if(-this.currentPosition[this.directionKey]-this.offsetList[e-1]>=20||0===e)if(this.options.loop&&e>=this.length-1){this.currentIndex=1;var n=this.currentPosition[this.directionKey]+this.offsetList[e-1]-this.offsetList[this.currentIndex-1];this.wrapper.style.transform="translate".concat(this.directionKey.toLocaleUpperCase(),"(").concat(n,"px) translateZ(0)")}else this.currentIndex=e;else this.currentIndex=e-1;null===(i=this.eventCacheList.change)||void 0===i||i.forEach((function(e){null==e||e(t.options.loop?t.currentIndex-1:t.currentIndex)}))}else this.currentIndex=this.length-1;else if(this.dir===y.last)if(e>=0)if(this.offsetList[e]+this.currentPosition[this.directionKey]>=20&&e>0){var o;if(this.options.loop&&e<=1){this.currentIndex=this.length-2;var r=-this.currentPosition[this.directionKey]+this.offsetList[e-1]+this.offsetList[this.currentIndex];this.wrapper.style.transform="translate".concat(this.directionKey.toLocaleUpperCase(),"(").concat(-r,"px) translateZ(0)")}else this.currentIndex=e-1;null===(o=this.eventCacheList.change)||void 0===o||o.forEach((function(e){null==e||e(t.options.loop?t.currentIndex-1:t.currentIndex)}))}else this.currentIndex=e;else this.currentIndex=this.length-1;this.scrollTo()}else this.autoplay&&this.autoPlay()}},{key:"scrollTo",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;return this.lastPosition[this.directionKey]=-this.offsetList[this.currentIndex],new Promise((function(i){var n=function(){d(t.wrapper,{duration:e,to:{transform:"translate".concat(t.directionKey.toLocaleUpperCase(),"(").concat(t.lastPosition[t.directionKey],"px) translateZ(0)")},complete:function(){i(),t.autoplay&&t.autoPlay()}})};t.options.loop?setTimeout(n,20):n()}))}},{key:"autoPlay",value:function(){var t=this;clearTimeout(this.autoplayTimer),this.autoplayTimer=window.setTimeout((function(){var e;t.currentIndex+=1,t.currentIndex>=t.length?t.currentIndex=0:t.options.loop&&t.currentIndex>=t.length-1&&(t.currentIndex=1,t.wrapper.style.transform="translate".concat(t.directionKey.toLocaleUpperCase(),"(").concat(-t.offsetList[t.currentIndex-1],"px) translateZ(0)")),null===(e=t.eventCacheList.change)||void 0===e||e.forEach((function(e){e(t.options.loop?t.currentIndex-1:t.currentIndex)})),t.scrollTo()}),this.autoplayDelay)}},{key:"on",value:function(t,e){Array.isArray(this.eventCacheList[t])?this.eventCacheList[t].push(e):this.eventCacheList[t]=[e]}},{key:"slideTo",value:function(t){this.currentIndex=t,this.scrollTo()}},{key:"destroy",value:function(){this.autoplay&&clearTimeout(this.autoplayTimer),this.wrapper.removeEventListener("touchstart",this.handleTouchStart,!1),this.wrapper.removeEventListener("touchmove",this.handleTouchMove,!1),this.wrapper.removeEventListener("touchend",this.handleTouchEnd,!1),this.wrapper.removeEventListener("touchcancel",this.handleTouchEnd,!1)}}])&&b(e.prototype,i),t}(),T=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Array.isArray(t)&&(t={imageList:t});var i=t,n=i.index,o=void 0===n?e:n,r=i.imageList,s=i.closable,a=void 0!==s&&s,c=i.onClick;if(r.length){var u,h=o,d=r.length,v=function(){null==c||c(h),a&&m()},y=l("div",{className:"tui-preview",onClick:v},l("div",{className:"tui-preview__container"},l("div",{className:"tui-preview__wrapper"},r.map((function(t){return l("div",{className:"tui-preview__slide",style:{background:"url(".concat(t,") center / contain no-repeat")}},l("i",{className:"dui-icon__loading"}))})))),l("div",{className:"tui-preview__index"},h+1,"/",d));f(y,{parent:document.body,mounted:function(){(u=new P(y.firstChild,{initialSlide:h,direction:"horizontal"})).on("change",(function(t){h=t,document.querySelector(".tui-preview__index").textContent="".concat(h+1,"/").concat(d)}))}});var m=function(){p(y,!0).then((function(){u.destroy()}))};return m}};return e}()}));